<!DOCTYPE html>
<html>
<head><title>Permanent Link</title></head>
<body>
<h1 id="error">Error: no hash</h1>
<p id="detailed">
    <br>
    This page is for showing permanent links generated by Interpret Esolangs Online, please <b>DON'T</b> access this directly.
</p>
<style>
.withdrawn {
    visibility: hidden;
}
.shown{
    visibility: visible;
}
</style>
<h3 id="link_t" class="withdrawn">Raw Link</h3><button data-clipboard-target="#link" class="btn">Copy</button>
<textarea id="link" cols=80 rows=20 readonly class="withdrawn"></textarea><br>
<h3 id="md_t" class="withdrawn">Markdown</h3><button data-clipboard-target="#md" class="btn">Copy</button>
<textarea id="md" cols=80 rows=20 readonly class="withdrawn"></textarea><br>
<h3 id="mw_t" class="withdrawn">MediaWiki</h3><button data-clipboard-target="#mw" class="btn">Copy</button>
<textarea id="mw" cols=80 rows=20 readonly class="withdrawn"></textarea><br>
<h3 id="ht_t" class="withdrawn">HTML</h3><button data-clipboard-target="#ht" class="btn">Copy</button>
<textarea id="ht" cols=80 rows=20 readonly class="withdrawn"></textarea><br>
<script>
if(window.location.hash.slice(1)){
    document.getElementById('error').remove();
    document.getElementById('detailed').remove();
    var decoded=atob(window.location.hash.slice(1).replaceAll('_','=').replaceAll('@','+').replaceAll('$','/'));
    var debase64=atob(decoded.split('#')[1].replaceAll('_','/').replaceAll('-','+')).split('\x00');
    var lang=decodeURIComponent(debase64[0]);
    document.getElementById('link').className='shown';
    document.getElementById('link_t').className='shown';
    document.getElementById('link').value=decoded;
    document.getElementById('md').className='shown';
    document.getElementById('md_t').className='shown';
    document.getElementById('md').value='['+lang+']'+'('+decoded+')';
    document.getElementById('mw').className='shown';
    document.getElementById('mw_t').className='shown';
    document.getElementById('mw').value='['+decoded+' '+lang+']';
    document.getElementById('ht').className='shown';
    document.getElementById('ht_t').className='shown';
    document.getElementById('ht').value=`<a href="${decoded}">${lang}</a>`;
}
</script>
<script type="module">
    import ClipboardJS from 'https://fastly.jsdelivr.net/npm/clipboard/+esm';
    var clipboard=new ClipboardJS('.btn');
    clipboard.on(
        'success',
        function(e){
            alert('Copied successfully');
            e.clearSelection();
        }
    )
    clipboard.on(
        'error',
        function(e){
            alert('Failed to copy');
            e.clearSelection();
        }
    )
</script>
</body>
</html>
